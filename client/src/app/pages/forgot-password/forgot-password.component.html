<div
  class="min-h-screen bg-[var(--color-background-light)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"
>
  <div class="max-w-md w-full space-y-8">
    <!-- Header -->
    <div class="text-center">
      <div class="flex justify-center mb-6">
        <div
          class="w-20 h-20 bg-[var(--color-brand-primary)] rounded-full flex items-center justify-center"
        >
          <lucide-icon
            [img]="Mail"
            class="h-10 w-10 text-[var(--color-on-dark)]"
          ></lucide-icon>
        </div>
      </div>
      <h1
        class="text-3xl font-bold text-[var(--color-text-heading)] font-brand"
      >
        Forgot Password?
      </h1>
      <p class="mt-2 text-sm text-[var(--color-text-muted)]">
        No worries! Enter your email address and we'll send you a link to reset
        your password.
      </p>
    </div>

    <!-- Success State -->
    <div
      *ngIf="emailSent && !isSubmitting"
      class="bg-green-50 border border-green-200 rounded-xl p-6 text-center"
    >
      <div class="flex justify-center mb-4">
        <lucide-icon
          [img]="CheckCircle"
          class="h-12 w-12 text-green-500"
        ></lucide-icon>
      </div>
      <h3 class="text-lg font-semibold text-green-800 mb-2">Email Sent!</h3>
      <p class="text-sm text-green-700 mb-4">
        We've sent a password reset link to
        <strong>{{ forgotPasswordForm.get("email")?.value }}</strong>
      </p>
      <p class="text-xs text-green-600">
        Please check your email and follow the instructions to reset your
        password. Don't forget to check your spam folder!
      </p>
      <div class="mt-6">
        <button
          (click)="resendEmail()"
          [disabled]="resendCooldown > 0"
          class="text-sm text-green-600 hover:text-green-800 font-medium disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{
            resendCooldown > 0
              ? "Resend in " + resendCooldown + "s"
              : "Resend Email"
          }}
        </button>
      </div>
    </div>

    <!-- Form -->
    <form
      *ngIf="!emailSent"
      [formGroup]="forgotPasswordForm"
      (ngSubmit)="onSubmit()"
      class="space-y-6"
    >
      <!-- Error Message -->
      <div
        *ngIf="errorMessage"
        class="bg-red-50 border border-red-200 text-red-700 rounded-lg p-4 flex items-center gap-3"
      >
        <lucide-icon
          [img]="AlertCircle"
          class="h-5 w-5 flex-shrink-0"
        ></lucide-icon>
        <span class="text-sm">{{ errorMessage }}</span>
      </div>

      <!-- Email Field -->
      <div>
        <label
          for="email"
          class="block text-sm font-medium text-[var(--color-text-default)] mb-2"
        >
          Email Address
        </label>
        <div class="relative">
          <div
            class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
          >
            <lucide-icon
              [img]="Mail"
              class="h-5 w-5 text-[var(--color-text-muted)]"
            ></lucide-icon>
          </div>
          <input
            id="email"
            type="email"
            formControlName="email"
            placeholder="Enter your email address"
            class="block w-full pl-10 pr-3 py-3 border rounded-lg bg-[var(--color-background-light)] text-[var(--color-text-default)] placeholder-[var(--color-text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--color-brand-primary)] focus:border-transparent transition-colors"
            [class.border-red-300]="isFieldInvalid('email')"
            [class.border-[var(--color-border)]]="!isFieldInvalid('email')"
          />
        </div>
        <div *ngIf="isFieldInvalid('email')" class="mt-1 text-sm text-red-600">
          {{ getFieldError("email") }}
        </div>
      </div>

      <!-- Submit Button -->
      <button
        type="submit"
        [disabled]="forgotPasswordForm.invalid || isSubmitting"
        class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-[var(--color-on-dark)] bg-[var(--color-brand-primary)] hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--color-brand-primary)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
      >
        <span *ngIf="!isSubmitting">Send Reset Link</span>
        <span *ngIf="isSubmitting" class="flex items-center gap-2">
          <div
            class="animate-spin rounded-full h-4 w-4 border-b-2 border-[var(--color-on-dark)]"
          ></div>
          Sending...
        </span>
      </button>
    </form>

    <!-- Back to Login -->
    <div class="text-center">
      <a
        routerLink="/login"
        class="inline-flex items-center gap-2 text-sm text-[var(--color-brand-primary)] hover:opacity-80 transition-colors"
      >
        <lucide-icon [img]="ArrowLeft" class="h-4 w-4"></lucide-icon>
        Back to Login
      </a>
    </div>

    <!-- Additional Help -->
    <div class="mt-8 text-center">
      <p class="text-xs text-[var(--color-text-muted)]">
        Still having trouble?
        <a
          href="mailto:support@oceanlibrary.com"
          class="text-[var(--color-brand-primary)] hover:opacity-80"
        >
          Contact Support
        </a>
      </p>
    </div>
  </div>
</div>
