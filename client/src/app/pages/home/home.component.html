<!-- Welcome Section -->
<section class="text-center py-8">
  <h2 class="text-3xl font-medium">Welcome to Goodreads</h2>
  <p class="mt-2 text-brown-600">
    Meet your favorite book, find your reading community, and manage your
    reading life.
  </p>
</section>

<!-- Currently Reading -->
<div class="tab-nav" *ngIf="currentBook">
  <section class="bg-brown-50 p-6 flex items-center gap-6">
    <!-- Book Image -->
    <img
      [src]="currentBook.image"
      [alt]="currentBook.title"
      class="w-16 shadow-md"
    />

    <!-- Text and Progress -->
    <div class="flex-1 max-w-md">
      <h3 class="font-semibold">{{ currentBook.title }}</h3>

      <!-- Progress bar: you can calculate progress dynamically if you want -->
      <div class="h-2 bg-brown-200 rounded mt-2">
        <div class="h-2 bg-yellow-500 w-1/3 rounded"></div>
      </div>
      <div class="flex items-center justify-between mt-1">
        <p class="text-sm text-brown-500">30% left</p>
      </div>

      <button
        class="mt-3 flex items-center gap-1 text-yellow-700 hover:underline"
        [routerLink]="['/book-info', currentBook._id]"
      >
        Continue reading
        <svg
          class="w-4 h-4"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M17 8l4 4m0 0l-4 4m4-4H3"
          />
        </svg>
      </button>
    </div>
  </section>
</div>


<!-- Popular Now -->
<section class="px-8 py-10">
  <h3 class="text-2xl font-semibold mb-15">Popular now</h3>

  <div *ngIf="isLoading" class="text-gray-600">Loading books...</div>
  <div *ngIf="errorMessage" class="text-red-500">{{ errorMessage }}</div>

  <div *ngIf="books && books.length" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
    <a
      *ngFor="let book of books | slice:0:5"
      [routerLink]="['/book-info', book._id]"
      class="text-center cursor-pointer block hover:shadow-lg transition"
    >
      <div class="relative">
        <div class="w-36 h-52 mx-auto overflow-hidden rounded shadow-md">
          <img
            [src]="book.image"
            [alt]="book.title"
            class="w-full h-full object-cover"
          />
        </div>
      </div>
      <h4 class="mt-2 font-medium">{{ book.title }}</h4>
      <p class="text-sm text-brown-600">{{ book.authorName }}</p>
      <p class="text-sm text-yellow-700 font-semibold mt-1">
        {{ book.price | currency }}
      </p>
      <div class="flex justify-center mt-1 text-yellow-500">
        <ng-container *ngFor="let star of [].constructor(5); let i = index">
          <span *ngIf="i < book.ratingAverage">★</span>
          <span *ngIf="i >= book.ratingAverage">☆</span>
        </ng-container>
      </div>
      <p class="text-xs text-gray-500">{{ book.ratingQuantity }} ratings</p>
    </a>
  </div>

  <div *ngIf="books && books.length === 0 && !isLoading">
    No books found.
  </div>
</section>

<!-- Trending this week -->
<section class="px-8 py-10">
  <h3 class="text-2xl font-semibold mb-6">Trending this week</h3>

  <div *ngIf="isLoading" class="text-gray-600">Loading books...</div>
  <div *ngIf="errorMessage" class="text-red-500">{{ errorMessage }}</div>

  <div class="grid md:grid-cols-2 gap-8">
    <a
      *ngFor="let book of books | slice:0:2"
      [routerLink]="['/book-info', book._id]"
      class="flex flex-col md:flex-row rounded overflow-hidden cursor-pointer hover:shadow-lg transition"
      [ngStyle]="{'background-color': 'var(--color-background-medium)'}"
    >
      <!-- Image -->
      <div class="flex-shrink-0 w-full md:w-52 h-72 md:h-auto overflow-hidden">
        <img
          [src]="book.image"
          [alt]="book.title"
          class="w-full h-full object-cover"
        />
      </div>

      <!-- Info -->
      <div class="p-6 flex flex-col justify-between flex-1">
        <div>
          <h4 class="text-xl font-semibold">{{ book.title }}</h4>
          <p class="text-sm text-brown-600 mb-2">{{ book.authorName }}</p>
          <div class="flex text-yellow-500 mb-2">
            <ng-container *ngFor="let star of [].constructor(5); let i = index">
              <span *ngIf="i < book.ratingAverage">★</span>
              <span *ngIf="i >= book.ratingAverage">☆</span>
            </ng-container>
          </div>
          <p
  class="text-base mt-2 line-clamp-4"
>
  {{ book.description }}
</p>
        </div>
        <div class="mt-4 flex gap-4 text-sm text-yellow-700 font-medium">
          <span class="hover:underline">Read more</span>
          <span class="hover:underline">Preview Book</span>
        </div>
      </div>
    </a>
  </div>
</section>



<section class="px-8 py-10">
  <h3 class="text-2xl font-semibold mb-6">Recommendation</h3>
  <div *ngIf="recommendationBooks?.length" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
    <ng-container *ngFor="let book of recommendationBooks">
      <!-- Use shared card component -->
      <a
        [routerLink]="['/book-info', book._id]"
        class="text-center cursor-pointer block hover:shadow-lg transition"
      >
        <div class="relative">
          <div class="w-36 h-52 mx-auto overflow-hidden rounded shadow-md">
            <img
              [src]="book.image"
              [alt]="book.title"
              class="w-full h-full object-cover"
            />
          </div>
        </div>
        <h4 class="mt-2 font-medium">{{ book.title }}</h4>
        <p class="text-sm text-brown-600">{{ book.authorName }}</p>
        <p class="text-sm text-yellow-700 font-semibold mt-1">
          {{ book.price | currency }}
        </p>
        <div class="flex justify-center mt-1 text-yellow-500">
          <ng-container *ngFor="let star of [].constructor(5); let i = index">
            <span *ngIf="i < book.ratingAverage">★</span>
            <span *ngIf="i >= book.ratingAverage">☆</span>
          </ng-container>
        </div>
        <p class="text-xs text-gray-500">{{ book.ratingQuantity }} ratings</p>
      </a>
    </ng-container>
  </div>
</section>


<section class="px-8 py-10">
  <h3 class="text-2xl font-semibold mb-6">Trending Series Collection</h3>
  <div *ngIf="trendingSeriesBooks?.length" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
    <ng-container *ngFor="let book of trendingSeriesBooks">
      <!-- Use shared card component -->
      <a
        [routerLink]="['/book-info', book._id]"
        class="text-center cursor-pointer block hover:shadow-lg transition"
      >
        <div class="relative">
          <div class="w-36 h-52 mx-auto overflow-hidden rounded shadow-md">
            <img
              [src]="book.image"
              [alt]="book.title"
              class="w-full h-full object-cover"
            />
          </div>
        </div>
        <h4 class="mt-2 font-medium">{{ book.title }}</h4>
        <p class="text-sm text-brown-600">{{ book.authorName }}</p>
        <p class="text-sm text-yellow-700 font-semibold mt-1">
          {{ book.price | currency }}
        </p>
        <div class="flex justify-center mt-1 text-yellow-500">
          <ng-container *ngFor="let star of [].constructor(5); let i = index">
            <span *ngIf="i < book.ratingAverage">★</span>
            <span *ngIf="i >= book.ratingAverage">☆</span>
          </ng-container>
        </div>
        <p class="text-xs text-gray-500">{{ book.ratingQuantity }} ratings</p>
      </a>
    </ng-container>
  </div>
</section>
