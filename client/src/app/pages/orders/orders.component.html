<div class="max-w-6xl mx-auto p-8 font-sans text-default">
  <h1
    class="font-serif text-4xl font-normal text-heading border-b border-border pb-4 mb-8"
  >
    Your Orders
  </h1>

  <div
    *ngIf="orders?.length === 0"
    class="text-center p-12 bg-medium rounded-lg"
  >
    <p class="text-lg mb-6">You haven't placed any orders yet.</p>
    <a
      routerLink="/books"
      class="inline-block px-6 py-3 bg-brand-primary text-on-dark rounded font-medium no-underline hover:bg-brand-primary-dark transition-colors"
    >
      Browse Books
    </a>
  </div>

  <div
    *ngFor="let order of orders"
    class="bg-light border border-border rounded-lg shadow-sm mb-8 overflow-hidden"
  >
    <div
      class="flex justify-between items-center p-4 bg-medium border-b border-border"
    >
      <div class="flex flex-col gap-2">
        <span class="font-medium text-heading"
          >Order #{{ order._id | slice : 0 : 8 }}</span
        >
        <span class="text-sm text-muted">{{
          order.createdAt | date : "mediumDate"
        }}</span>
      </div>
      <div>
        <span
          class="px-3 py-1 rounded-full text-sm font-medium capitalize"
          [ngClass]="{
            'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200':
              order.status === 'pending',
            'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200':
              order.status === 'shipped',
            'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200':
              order.status === 'delivered',
            'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200':
              order.status === 'cancelled'
          }"
        >
          {{ order.status | titlecase }}
        </span>
      </div>
    </div>

    <div class="py-4">
      <div
        *ngFor="let item of order.items"
        class="flex p-4 gap-6 border-b border-border last:border-b-0"
      >
        <img
          [src]="item.image"
          alt="{{ item.title }}"
          class="w-20 h-28 object-cover rounded shadow-sm"
        />
        <div class="flex-1 flex flex-col justify-between">
          <h3 class="font-serif text-lg font-normal text-heading m-0 mb-2">
            {{ item.title }}
          </h3>
          <div class="flex justify-between items-center">
            <span class="text-sm text-muted">Qty: {{ item.quantity }}</span>
            <span class="font-medium">{{ item.price | currency }}</span>
          </div>
        </div>
      </div>
    </div>

    <div
      class="flex justify-between items-center p-4 bg-medium border-t border-border"
    >
      <div class="flex gap-2 items-center">
        <span class="text-sm"
          >Payment: {{ order.paymentMethod | titlecase }}</span
        >
        <span
          class="text-xs font-medium"
          [ngClass]="{
            'text-yellow-800 dark:text-yellow-600':
              order.paymentStatus === 'pending',
            'text-green-800 dark:text-green-200':
              order.paymentStatus === 'paid',
            'text-red-800 dark:text-red-200': order.paymentStatus === 'failed'
          }"
        >
          ({{ order.paymentStatus | titlecase }})
        </span>
      </div>
      <div class="flex items-center gap-2 font-medium">
        <span>Total:</span>
        <span class="text-xl text-heading">{{ order.total | currency }}</span>
      </div>
    </div>
  </div>

  <div
    *ngIf="totalPages > 1"
    class="flex justify-center items-center gap-4 mt-8"
  >
    <button
      (click)="prevPage()"
      [disabled]="currentPage === 1"
      class="px-4 py-2 bg-brand-primary text-on-dark rounded font-sans disabled:opacity-60 disabled:cursor-not-allowed hover:bg-brand-primary-dark transition-colors"
    >
      Previous
    </button>
    <span class="text-sm text-muted"
      >Page {{ currentPage }} of {{ totalPages }}</span
    >
    <button
      (click)="nextPage()"
      [disabled]="currentPage === totalPages"
      class="px-4 py-2 bg-brand-primary text-on-dark rounded font-sans disabled:opacity-60 disabled:cursor-not-allowed hover:bg-brand-primary-dark transition-colors"
    >
      Next
    </button>
  </div>
</div>
