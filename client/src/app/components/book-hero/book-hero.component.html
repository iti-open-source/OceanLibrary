<section
  *ngIf="book"
  class="w-full bg-[var(--color-background-light)] py-12 px-4 sm:px-8 md:px-16 flex flex-col md:flex-row items-center justify-evenly gap-12"
>
  <div
    class="flex-shrink-0 w-56 h-80 sm:w-64 sm:h-96 md:w-72 md:h-[28rem] shadow-lg rounded-lg overflow-hidden bg-[var(--color-background-medium)] flex items-center justify-center"
  >
    <div
      class="transition-transform duration-500 hover:scale-105 hover:shadow-2xl w-full h-full"
    >
      <img
        [src]="book.image"
        [alt]="book.title"
        class="object-cover w-full h-full"
      />
    </div>
  </div>

  <div
    class="flex-1 flex flex-col gap-6 items-center md:items-start w-full max-w-2xl"
  >
    <div class="w-full">
      <div
        class="text-xs font-medium text-[var(--color-text-muted)] italic mb-1 text-center md:text-left"
      >
        Featured Book
      </div>
      <div
        class="text-xs font-bold text-[var(--color-brand-primary)] mb-2 tracking-wide text-center md:text-left uppercase"
      >
        {{ book.genres[0] || "Fiction" }}
      </div>
      <h1
        class="text-3xl font-brand text-[var(--color-brand-primary)] mb-1 text-center md:text-left"
      >
        {{ book.title }}
      </h1>
      <div
        class="text-sm font-bold text-[var(--color-text-muted)] mb-1 text-center md:text-left"
      >
        {{ book.authorName }}
      </div>
      <div
        class="text-xs text-[var(--color-text-muted)] mb-2 text-center md:text-left"
      >
        {{ book.pages }} Pages â€¢ {{ book.createdAt | date : "mediumDate" }}
      </div>
      <div
        class="italic text-[var(--color-text-heading)] text-sm mb-2 text-center md:text-left"
      >
        {{ book.description | slice : 0 : 150
        }}{{ book.description.length > 150 ? "..." : "" }}
      </div>
    </div>
    <div
      class="text-sm text-[var(--color-text-default)] leading-relaxed mb-2 text-center md:text-left w-full"
    >
      {{ book.description }}
    </div>
    <div
      class="flex flex-col sm:flex-row sm:items-center gap-6 mb-2 w-full justify-center md:justify-start"
    >
      <div class="flex flex-col items-center sm:items-start w-full sm:w-auto">
        <div class="text-xs text-[var(--color-text-muted)] mb-1">
          {{ book.pages }} pages total
        </div>
        <div class="text-xs text-[var(--color-text-muted)]">
          Available for purchase
        </div>
      </div>
      <div
        class="flex flex-col items-center sm:items-start sm:ml-8 w-full sm:w-auto"
      >
        <div class="text-lg font-brand text-[var(--color-brand-primary)]">
          {{ book.title }}
        </div>
        <div class="flex items-center gap-1 text-yellow-400">
          <ng-container *ngFor="let star of [1, 2, 3, 4, 5]; let i = index">
            <span
              class="text-xl"
              [ngClass]="{
                'text-yellow-400': i < book.ratingAverage,
                'text-[var(--color-background-medium)]': i >= book.ratingAverage
              }"
              >&#9733;</span
            >
          </ng-container>
          <span class="text-sm text-[var(--color-text-muted)] ml-1"
            >({{ book.ratingQuantity }} reviews)</span
          >
        </div>
      </div>
    </div>
    <div
      class="flex flex-col sm:flex-row gap-4 items-center sm:items-center mb-2 w-full justify-center md:justify-start"
    >
      <button
        class="cursor-pointer flex items-center gap-2 bg-[var(--color-brand-primary)] text-[var(--color-on-dark)] font-semibold px-6 py-2 rounded-lg shadow hover:bg-[var(--color-background-medium)] hover:text-[var(--color-brand-primary)] transition-colors w-full sm:w-auto justify-center"
      >
        Add to Cart - ${{ book.price }}
        <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h13M17 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6"
          />
        </svg>
      </button>
      <div class="flex flex-col items-center sm:items-start">
        <div class="text-sm text-[var(--color-text-muted)]">
          In Stock: {{ book.stock }} copies
        </div>
        <div class="text-xs text-[var(--color-text-muted)]">
          Free shipping available
        </div>
      </div>
    </div>
    <div
      class="flex flex-wrap gap-2 mb-2 justify-center md:justify-start w-full"
    >
      <span class="font-bold text-[var(--color-text-muted)] mr-2">GENRES:</span>
      <span
        *ngFor="let genre of book.genres"
        class="bg-[var(--color-background-medium)] text-[var(--color-brand-primary)] px-3 py-1 rounded-full text-xs font-medium"
        >{{ genre }}</span
      >
    </div>
    <div
      class="flex flex-wrap gap-8 items-center mt-2 justify-center md:justify-start w-full"
    >
      <div class="flex items-center gap-2">
        <img
          src="https://randomuser.me/api/portraits/men/32.jpg"
          alt="User"
          class="w-7 h-7 rounded-full border border-[var(--color-border)]"
        />
        <span class="text-xs text-[var(--color-text-muted)]"
          >70.8k people are currently reading</span
        >
      </div>
      <div class="flex items-center gap-2">
        <img
          src="https://randomuser.me/api/portraits/women/44.jpg"
          alt="User"
          class="w-7 h-7 rounded-full border border-[var(--color-border)]"
        />
        <span class="text-xs text-[var(--color-text-muted)]"
          >72k people wanted to read</span
        >
      </div>
    </div>
  </div>
</section>
